@model KGID_Models.KGIDMotorInsurance.VM_MotorInsuranceIDVDetails

<div class="row" id="divIDVDetails">
    <form id="FormIDVDetails" enctype="multipart/form-data" class="col-12">
        @Html.Hidden("miidv_emp_id", Session["UId"], new { id = "hdnmivdEmpID" })
        @Html.Hidden("miidv_application_id", new { id = "hdnMIVDReferanceNo" })
        @Html.HiddenFor(m=>m.miidv_pagetype,new { id="hdnIdvPageType"})
        <!--//IDV Details// -->
        <div class="idv-details">
            <div class="row">
                <div class="form-group col-1">
                </div>
                <div class="form-group col-4">
                    Insured's Declared value of Vehicle Rs.
                </div>
                <div class="form-group col-4">
                    @Html.TextBoxFor(model => model.miidv_insured_declared_value_amount, new { @id = "txtidvovamnt", @class = "form-control csIsidvovamnt numbersonly", onkeyup = "sum()", @maxlength = "10" })
                    <label id="errIsidvvalue" class="col-form-label-sm text-danger err" hidden>Please Enter IDV Value</label>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-1">
                </div>
                <div class="form-group col-4">
                    Non-electrical accessories fitted to the vehicle Rs.
                </div>
                <div class="form-group col-4">
                    @Html.TextBoxFor(model => model.miidv_non_electrical_accessories_amount, new { @id = "txtnoneleaccamnt", @class = "form-control csIsnoneleaccamnt numbersonly", onkeyup = "sum()", @maxlength = "6" })
                    <label id="errIsRheumaticFever" class="col-form-label-sm text-danger err" hidden>Please enter details.</label>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-1">
                </div>
                <div class="form-group col-4">
                    Electrical and electronic accessories fitted to the vehicle Rs.
                </div>
                <div class="form-group col-4">
                    @Html.TextBoxFor(model => model.miidv_electrical_accessories_amount, new { @id = "txteleaccamnt", @class = "form-control csIseleaccamnt numbersonly", onkeyup = "sum()", @maxlength = "6" })
                    <label id="errIsRheumaticFever" class="col-form-label-sm text-danger err" hidden>Please enter details.</label>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-1">
                </div>
                <div class="form-group col-4">
                    Side car (Two wheeler Trailer(Pvt cars)) Rs.
                </div>
                <div class="form-group col-4">
                    @Html.TextBoxFor(model => model.miidv_side_car_trailer_amount, new { @id = "txtsidecaramnt", @class = "form-control csIssidecaramnt numbersonly", onkeyup = "sum()", @maxlength = "6" })
                    <label id="errIsRheumaticFever" class="col-form-label-sm text-danger err" hidden>Please enter details.</label>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-1">
                </div>
                <div class="form-group col-4">
                    Value of CNG / LPG KIT Rs.
                </div>
                <div class="form-group col-4">
                    @Html.TextBoxFor(model => model.miidv_value_of_cng_lpg_amount, new { @id = "txtcngamnt", @class = "form-control csIscngamnt numbersonly", onkeyup = "sum()", @maxlength = "6" })
                    <label id="errIsRheumaticFever" class="col-form-label-sm text-danger err" hidden>Please enter details.</label>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-1">
                    @*@Html.TextBoxFor(model => model.midv_own_damage_value, new { @id = "txtowndamage", @class = "form-control csIstotamnt", @readonly = "readonly", style = "font-weight: bold;" })*@
                </div>
                <div class="form-group col-4">
                    Total Purchase Value
                </div>
                <div class="form-group col-4">
                    @Html.TextBoxFor(model => model.miidv_total_amount, new { @id = "txttotamnt", @class = "form-control csIstotamnt numbersonly", @readonly = "readonly", style = "font-weight: bold;" })
                    <label id="errIsRheumaticFever" class="col-form-label-sm text-danger err" hidden>Please enter details.</label>
                </div>
            </div>
        </div>

        <!--//IDV Details END//-->
    </form>
</div>
@*<div class="hiddenMaDate">
    <input type="text" id="txthiddenMaDate" class="form-control" hidden />
</div>*@
<hr />
<div class="row">
    <div class="col-2"></div>
    <div class="col-4">
        <h3>Total Amount Payable</h3>
    </div>
    <div class="col-4">
        <input type="text" id="txtTotalPremium" style="font-weight: bold;" class="form-control" readonly />
    </div>
    <div class="col-2">
        @*<input type="submit" id="btnMIPremiumDetails" value="View Premium Details" class="btn btn-link btn-sm pull-right">*@
        <button id='btnMIPremiumDetails'>View Premium Details</button>
    </div>
</div>
<div id="Premiumdetails" style="display:none">
    <h3 style="text-align:center">SCHEDULE OF PREMIUM</h3>
    <hr />
    <section>
        <div class="row">
            <div class="col-6">
                <b>A: OWN DAMAGES</b>
                <div class="row">
                    <div class="col-6">
                        <br />Basic Premium
                    </div>
                    <div class="col-6">
                        <input type="text" id="txtbp" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Add (1.190)% on IDV
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtbpidv" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Sub Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtidvsubtot" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />O.D. Premium
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtodp" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Less govt.Rebate(20)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlgrod" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Sub Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtrebatetotod" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Add Electrical Accessories
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txteleacc" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />LPG Kit Amount ()%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlpgkitod" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Imported Vehicles ()%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtiv" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Fibre Glass Fuel Tank
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtfgft" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Driving Institution (1)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtdiod" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Sub Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtsubtotlpgod" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Less Automobile Assn Member ()%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlaam" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Handicapped (1)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txth" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Anti Theft Device ()%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtatd" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Sub Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtsubtotextra" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Add Mlaus (0)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtamod" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Less NCB (25)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlessncb" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Others
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtothers" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtodtot" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
            </div>
            <div class="col-6">
                <b>B: LIABILITY TO PUBLIC RISK</b>
                <div class="row">
                    <div class="col-6">
                        <br />Liability to Public Risk
                    </div>
                    <div class="col-6">
                        <input type="text" id="txtlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Less Govt Rebate (20)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlgrlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Sub Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtsubtotlpr" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Add Driving Institution (1)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtdilpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />LPG Kit Amount (60)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlpgkitlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Sub Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtsubtotlpglpr" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Add
                    </div>
                    <div class="col-6">
                        <br />

                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />(a)Driver's Risk
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtdrlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />(b)Pillion Rider's Risk
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtprrlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />(c)Passenger's Risk
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtprlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />(d).Cleaner's Risk
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtclrlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />(e).Coolies's Risk
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtcorlpr" class="form-control" readonly />
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <br /><br />Add Malus (0)%
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtamlpr" class="form-control" readonly />
                    </div>
                </div>

                <div class="row" style="padding-top:312px">
                    <div class="col-6">
                        <br /><br />Total
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlprtot" style="font-weight: bold;" class="form-control" readonly />
                    </div>
                </div>
            </div>
        </div>
    </section>
    <hr />
    <section>
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div class="col-6">
                        <br /><br />Total of A
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtodtotA" class="form-control" readonly />
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col-6">
                        <br /><br />Total of B
                    </div>
                    <div class="col-6">
                        <br />
                        <input type="text" id="txtlprtotB" class="form-control" readonly />
                    </div>
                </div>
            </div>
        </div>
    </section>
    <hr />
    <section>
        <div class="row">
            <div class="col-4">
                <div class="row">
                    <div class="col-6">
                        <br />Total of A&B
                    </div>
                    <div class="col-6">
                        <input type="text" id="txttotAB" class="form-control" readonly />
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="row">
                    <div class="col-6">
                        <br />Previous Year's Different
                    </div>
                    <div class="col-6">
                        <input type="text" id="txtpyd" class="form-control" readonly />
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="row">
                    <div class="col-6">
                        <br />Current Year's Different
                    </div>
                    <div class="col-6">
                        <input type="text" id="txtcyd" class="form-control" value="0.00" readonly />
                    </div>
                </div>
            </div>
        </div>
    </section>
    <hr />
    <section>
        <div class="row">
            <div class="col-4">
                <div class="row">
                    <div class="col-6">
                        <br />Premium
                    </div>
                    <div class="col-6">
                        <input type="text" id="txtpremium" class="form-control" readonly />
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="row">
                    <div class="col-6">
                        <br />GST (18%)
                    </div>
                    <div class="col-6">
                        <input type="text" id="txtgstamt" class="form-control" readonly />
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="row">
                    <div class="col-6">
                        <br />Total Current Receipt
                    </div>
                    <div class="col-6">
                        <input type="text" id="txttotalcrpremium" class="form-control" readonly />
                    </div>
                </div>
            </div>
        </div>
        <br /><br />
        <hr />
        <div class="row">
            <div class="col-2"></div>
            <div class="col-4">
                <h3>Total Amount Payable</h3>
            </div>
            <div class="col-4">
                <input type="text" id="txtTotalPremiumAmt" style="font-weight: bold;" class="form-control" readonly />
            </div>
            <div class="col-2"></div>
        </div>
    </section>
    <hr />
</div>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />
<script type="text/javascript">
    if ($("#hdnPagetype").val() == "Renewal" || $("#hdnPagetype").val() == "EditRenewal") {
        $("#FormIDVDetails").find("input, button, submit, textarea, select, input[type='radio']").attr('readonly', true);

    }
    else {
        $("#FormIDVDetails").find("input, button, submit, textarea, select,input[type='radio']").attr('readonly', false);
        $("#txttotamnt").attr('readonly', true);
    }
    ////
    $("#Premiumdetails").dialog({
        modal: true,
        autoOpen: false,
        title: "Premium Details",
        width: 1200,
        height: 500
    });
    var button = document.getElementById('btnMIPremiumDetails');
    button.onclick = function () {
        var div = document.getElementById('Premiumdetails');
        if (div.style.display !== 'none') {
            div.style.display = 'none';
            $('#Premiumdetails').dialog('open');
        }
        else {
            div.style.display = 'block';
        }
    };
    //$(document).ready(function () {
    //    var txttotamntValue = document.getElementById('txttotamnt').value || 0;
    //    //txtbpidv
    //    var txtbpidvValue = ((parseFloat(txttotamntValue)) / 100) * 1.190;

    //    if (!isNaN(txtbpidvValue)) {
    //        var res = Math.round(txtbpidvValue).toFixed(2);
    //    }
    //    //txtlgrod
    //    var txtlgrodValue = ((parseFloat(res)) / 100) * 20;
    //    if (!isNaN(txtlgrodValue)) {
    //        var res1 = Math.round(txtlgrodValue).toFixed(2);
    //    }
    //    //txtrebatetotod
    //    var txtrebatetotodvalue = parseFloat(res) - parseFloat(res1);
    //    var res2 = Math.round(txtrebatetotodvalue).toFixed(2);

    //    //txtsubtotlpgod
    //    var txtsubtotlpgodValue = Math.round(txtrebatetotodvalue).toFixed(2);

    //    //txth
    //    var txthValue = ((parseFloat(txtsubtotlpgodValue)) / 100) * 1;

    //    //txtsubtotextra
    //    var txtsubtotextraVlaue = Math.round(txtsubtotlpgodValue).toFixed(2);

    //    //txtlessncb
    //    var txtlessncbValue = ((parseFloat(txtsubtotextraVlaue)) / 100) * 25;
    //    if (!isNaN(txtlessncbValue)) {
    //        var res3 = Math.round(txtlessncbValue).toFixed(2);
    //    }

    //    //txtodtot
    //    var txtodtotValue = parseFloat(txtsubtotextraVlaue) - parseFloat(res3);
    //    var res4 = Math.round(txtodtotValue).toFixed(2);

    //    //B. LIABILITY TO PUBLIC RISK
    //    //txtlgrlpr
    //    var txtlprValue = 6847.00;
    //    var res5 = Math.round(txtlprValue).toFixed(2)
    //    //txtbpidv
    //    var txtlgrlprValue = ((parseFloat(res5)) / 100) * 20;
    //    var res6 = Math.round(txtlgrlprValue).toFixed(2);
    //    //txtsubtotlpr
    //    var txtsubtotlprValue = parseFloat(res5) - parseFloat(res6)
    //    var res7 = Math.round(txtsubtotlprValue).toFixed(2);

    //    //txtlpgkitlpr
    //    var txtcngamntrValue = document.getElementById('txtcngamnt').value || 0;
    //    var txtlpgkitlprValue = ((parseFloat(txtcngamntrValue)) / 100) * 60;
    //    var res8 = Math.round(txtlpgkitlprValue).toFixed(2);

    //    //txtsubtotlpglpr
    //    var txtsubtotlpglprValue = parseFloat(res7) + parseFloat(res8)
    //    var res9 = Math.round(txtsubtotlpglprValue).toFixed(2);

    //    //txtdrlpr
    //    var res10 = "25.00";
    //    //txtprlpr
    //    var res11 = "2730.00";

    //    //txtlprtot
    //    var txtlprtotValue = parseFloat(res9) + parseFloat(res10) + parseFloat(res11);
    //    var res12 = Math.round(txtlprtotValue).toFixed(2);

    //    //txttotAB
    //    var txttotABValue = parseFloat(res4) + parseFloat(res12);
    //    var res13 = Math.round(txttotABValue).toFixed(2);

    //    //txtgstamt
    //    var txtgstamtValue = ((parseFloat(res13)) / 100) * 18;
    //    var res14 = Math.round(txtgstamtValue).toFixed(2);

    //    //txttotalcrpremium
    //    var txttotalcrpremiumValue = parseFloat(res13) + parseFloat(res14);
    //    var res15 = Math.round(txttotalcrpremiumValue).toFixed(2);
    //    document.getElementById('txtPV').value = ReplaceNumberWithCommas(res15);
        
    //    document.getElementById('txtTotalPremium').value = ReplaceNumberWithCommas(res15);
    //    $('#txtTotalPremium').change(function () {
    //        var MDateValue = $("#txtTotalPremium").val();
    //        document.getElementById('txtPV').value = MDateValue;
    //    });  

    //});
    //function ReplaceNumberWithCommas(yourNumber) {
    //    //Seperates the components of the number
    //    var components = yourNumber.toString().split(".");
    //    //Comma-fies the first part
    //    components[0] = components[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    //    //Combines the two sections
    //    return components.join(".");
    //}
        //$(document).ready(function () {
        //    var MDateValue = $("#txtMDate").val();
        //    document.getElementById('txthiddenMaDate').value = MDateValue;
        //});
        //var MFdate = document.getElementById('txthiddenMaDate').value;
        //var MDate = new Date(MFdate.replace(/(\d{2})-(\d{2})-(\d{4})/, "$2/$1/$3"))

        //var today = new Date();
        //var formattedtoday = today.getDate() + '-' + (today.getMonth() + 1) + '-' + today.getFullYear();
        //var TDate = new Date(formattedtoday.replace(/(\d{2})-(\d{2})-(\d{4})/, "$2/$1/$3"))

        //var getmonthDiff = monthDiff(MDate, TDate)
        //console.log(getmonthDiff)

        //function sum() {
        //    var txtidvovamntValue = document.getElementById('txtidvovamnt').value || 0;
        //    var txtnoneleaccamntValue = document.getElementById('txtnoneleaccamnt').value || 0;
        //    var txteleaccamntValue = document.getElementById('txteleaccamnt').value || 0;
        //    var txtsidecaramntValue = document.getElementById('txtsidecaramnt').value || 0;
        //    var txtcngamntrValue = document.getElementById('txtcngamnt').value || 0;
        //    var result = parseFloat(txtidvovamntValue) + parseFloat(txtnoneleaccamntValue) + parseFloat(txteleaccamntValue) + parseFloat(txtsidecaramntValue) + parseFloat(txtcngamntrValue);
        //    if (!isNaN(result)) {
        //        var res = parseFloat(result).toFixed(2)
        //        document.getElementById('txttotamnt').value = res;
        //        alert(getmonthDiff)
        //    }
        //}
        //function monthDiff(d1, d2) {
        //    var months;
        //    months = (d2.getFullYear() - d1.getFullYear()) * 12;
        //    months -= d1.getMonth();
        //    months += d2.getMonth();
        //    return months <= 0 ? 0 : months;
        //}
</script>